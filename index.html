<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Product Tracker</title>
<style>
  /* Basic styles */
  body {
    font-family: Arial, sans-serif;
  }
  /* Menu bar */
  .menu-bar {
    background-color: #333;
    overflow: hidden;
  }
  .menu-bar button {
    background-color: #333;
    color: white;
    border: none;
    padding: 14px 16px;
    cursor: pointer;
    float: left;
  }
  .menu-bar button:hover {
    background-color: #ddd;
    color: black;
  }
  /* Product square */
  .product-square {
    width: 150px;
    height: 150px;
    background-color: #ADD8E6; /* Baby blue */
    position: relative;
    margin: 10px;
    display: inline-block;
    vertical-align: top;
    padding: 10px;
    box-sizing: border-box;
  }
  .product-square .info-icon {
    position: absolute;
    top: 5px;
    right: 5px;
    cursor: pointer;
    font-weight: bold;
    background: #fff;
    border-radius: 50%;
    padding: 2px 6px;
  }
  /* Pop-up modal */
  .modal {
    display: none;
    position: fixed;
    z-index: 1;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    overflow: auto;
    background-color: rgba(0,0,0,0.4);
  }
  .modal-content {
    background-color: #fefefe;
    margin: 5% auto;
    padding: 20px;
    width: 300px;
  }
  .modal-content label {
    display: block;
    margin-top: 10px;
  }
  .modal-content input {
    width: 100%;
  }
</style>
</head>
<body>

<div class="menu-bar">
  <button id="add-button">Add</button>
</div>

<div id="product-container"></div>

<!-- Modal for adding/editing product info -->
<div id="product-modal" class="modal">
  <div class="modal-content">
    <h2 id="modal-title">Add Product</h2>
    <label>Product Name:
      <input type="text" id="product-name">
    </label>
    <label>Responsible Engineer:
      <input type="text" id="responsible-engineer">
    </label>
    <label>Date Updated:
      <input type="date" id="date-updated">
    </label>
    <!-- Fields for step and origin (not displayed on the square) -->
    <label>Step:
      <input type="text" id="step">
    </label>
    <label>Origin:
      <input type="text" id="origin">
    </label>
    <button id="save-button">Save</button>
    <button id="cancel-button">Cancel</button>
  </div>
</div>

<script>
  let products = [];
  
  // Load products from localStorage
  if (localStorage.getItem('products')) {
    products = JSON.parse(localStorage.getItem('products'));
  }
  
  // Function to save products to localStorage
  function saveProducts() {
    localStorage.setItem('products', JSON.stringify(products));
  }
  
  // Function to render products
  function renderProducts() {
    const container = document.getElementById('product-container');
    container.innerHTML = ''; // Clear existing content
  
    products.forEach((product, index) => {
      const square = document.createElement('div');
      square.className = 'product-square';
      square.dataset.index = index;
  
      // Display product name, responsible engineer, and date updated
      const name = document.createElement('div');
      name.textContent = `Name: ${product.name}`;
      square.appendChild(name);
  
      const engineer = document.createElement('div');
      engineer.textContent = `Engineer: ${product.engineer}`;
      square.appendChild(engineer);
  
      const date = document.createElement('div');
      date.textContent = `Updated: ${product.date}`;
      square.appendChild(date);
  
      // Info icon
      const infoIcon = document.createElement('div');
      infoIcon.className = 'info-icon';
      infoIcon.textContent = 'i';
      square.appendChild(infoIcon);
  
      // Click handler for info icon
      infoIcon.addEventListener('click', (e) => {
        e.stopPropagation(); // Prevent triggering square click
        alert(`More Info:\nStep: ${product.step}\nOrigin: ${product.origin}`);
      });
  
      // Click handler for square to edit
      square.addEventListener('click', () => {
        openModal('Edit Product', product, index);
      });
  
      container.appendChild(square);
    });
  }
  
  // Function to open the modal
  function openModal(title, product = {}, index) {
    document.getElementById('modal-title').textContent = title;
    document.getElementById('product-name').value = product.name || '';
    document.getElementById('responsible-engineer').value = product.engineer || '';
    document.getElementById('date-updated').value = product.date || '';
    document.getElementById('step').value = product.step || '';
    document.getElementById('origin').value = product.origin || '';
  
    // Store index in save button's dataset
    const saveButton = document.getElementById('save-button');
    saveButton.dataset.index = index !== undefined ? index : '';
  
    document.getElementById('product-modal').style.display = 'block';
  }
  
  // Close modal
  document.getElementById('cancel-button').addEventListener('click', () => {
    document.getElementById('product-modal').style.display = 'none';
  });
  
  // Save product
  document.getElementById('save-button').addEventListener('click', () => {
    const name = document.getElementById('product-name').value;
    const engineer = document.getElementById('responsible-engineer').value;
    const date = document.getElementById('date-updated').value;
    const step = document.getElementById('step').value;
    const origin = document.getElementById('origin').value;
  
    const product = { name, engineer, date, step, origin };
  
    const index = document.getElementById('save-button').dataset.index;
  
    if (index !== '') {
      // Edit existing product
      products[index] = product;
    } else {
      // Add new product
      products.push(product);
    }
  
    saveProducts();
    renderProducts();
    document.getElementById('product-modal').style.display = 'none';
  });
  
  // Add button
  document.getElementById('add-button').addEventListener('click', () => {
    openModal('Add Product');
  });
  
  // Initial render
  renderProducts();
</script>

</body>
</html>
